<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>bower_components\amcharts\dist\amcharts\exporting\jspdf.plugin.addimage.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/fabric.BaseBrush.html">fabric.BaseBrush</a></li>
                                <li><a href="../classes/fabric.Canvas.html">fabric.Canvas</a></li>
                                <li><a href="../classes/fabric.Circle.html">fabric.Circle</a></li>
                                <li><a href="../classes/fabric.CircleBrush.html">fabric.CircleBrush</a></li>
                                <li><a href="../classes/fabric.Color.html">fabric.Color</a></li>
                                <li><a href="../classes/fabric.Element.html">fabric.Element</a></li>
                                <li><a href="../classes/fabric.Ellipse.html">fabric.Ellipse</a></li>
                                <li><a href="../classes/fabric.Gradient.html">fabric.Gradient</a></li>
                                <li><a href="../classes/fabric.Group.html">fabric.Group</a></li>
                                <li><a href="../classes/fabric.Image.filters.BaseFilter.html">fabric.Image.filters.BaseFilter</a></li>
                                <li><a href="../classes/fabric.Image.filters.Brightness.html">fabric.Image.filters.Brightness</a></li>
                                <li><a href="../classes/fabric.Image.filters.Convolute.html">fabric.Image.filters.Convolute</a></li>
                                <li><a href="../classes/fabric.Image.filters.Creates an instance of a PdfPrinter which turns document definition into a pdf.html">fabric.Image.filters.Creates an instance of a PdfPrinter which turns document definition into a pdf</a></li>
                                <li><a href="../classes/fabric.Image.filters.fabric.Image.html">fabric.Image.filters.fabric.Image</a></li>
                                <li><a href="../classes/fabric.Image.filters.fabric.Image.filter.Blend.html">fabric.Image.filters.fabric.Image.filter.Blend</a></li>
                                <li><a href="../classes/fabric.Image.filters.fabric.IText.html">fabric.Image.filters.fabric.IText</a></li>
                                <li><a href="../classes/fabric.Image.filters.fabric.Text.html">fabric.Image.filters.fabric.Text</a></li>
                                <li><a href="../classes/fabric.Image.filters.GradientTransparency.html">fabric.Image.filters.GradientTransparency</a></li>
                                <li><a href="../classes/fabric.Image.filters.Grayscale.html">fabric.Image.filters.Grayscale</a></li>
                                <li><a href="../classes/fabric.Image.filters.Invert.html">fabric.Image.filters.Invert</a></li>
                                <li><a href="../classes/fabric.Image.filters.Mask.html">fabric.Image.filters.Mask</a></li>
                                <li><a href="../classes/fabric.Image.filters.Multiply.html">fabric.Image.filters.Multiply</a></li>
                                <li><a href="../classes/fabric.Image.filters.Noise.html">fabric.Image.filters.Noise</a></li>
                                <li><a href="../classes/fabric.Image.filters.Pixelate.html">fabric.Image.filters.Pixelate</a></li>
                                <li><a href="../classes/fabric.Image.filters.RemoveWhite.html">fabric.Image.filters.RemoveWhite</a></li>
                                <li><a href="../classes/fabric.Image.filters.Resize.html">fabric.Image.filters.Resize</a></li>
                                <li><a href="../classes/fabric.Image.filters.Sepia.html">fabric.Image.filters.Sepia</a></li>
                                <li><a href="../classes/fabric.Image.filters.Sepia2.html">fabric.Image.filters.Sepia2</a></li>
                                <li><a href="../classes/fabric.Image.filters.Tint.html">fabric.Image.filters.Tint</a></li>
                                <li><a href="../classes/fabric.Intersection.html">fabric.Intersection</a></li>
                                <li><a href="../classes/fabric.Line.html">fabric.Line</a></li>
                                <li><a href="../classes/fabric.Object.html">fabric.Object</a></li>
                                <li><a href="../classes/fabric.Path.html">fabric.Path</a></li>
                                <li><a href="../classes/fabric.PathGroup.html">fabric.PathGroup</a></li>
                                <li><a href="../classes/fabric.Pattern.html">fabric.Pattern</a></li>
                                <li><a href="../classes/fabric.PatternBrush.html">fabric.PatternBrush</a></li>
                                <li><a href="../classes/fabric.PencilBrush.html">fabric.PencilBrush</a></li>
                                <li><a href="../classes/fabric.Point.html">fabric.Point</a></li>
                                <li><a href="../classes/fabric.Polygon.html">fabric.Polygon</a></li>
                                <li><a href="../classes/fabric.Polyline.html">fabric.Polyline</a></li>
                                <li><a href="../classes/fabric.Rect.html">fabric.Rect</a></li>
                                <li><a href="../classes/fabric.Shadow.html">fabric.Shadow</a></li>
                                <li><a href="../classes/fabric.SprayBrush.html">fabric.SprayBrush</a></li>
                                <li><a href="../classes/fabric.StaticCanvas.html">fabric.StaticCanvas</a></li>
                                <li><a href="../classes/fabric.Triangle.html">fabric.Triangle</a></li>
                                <li><a href="../classes/google/Area.html">google/Area</a></li>
                                <li><a href="../classes/google/Bar.html">google/Bar</a></li>
                                <li><a href="../classes/google/Common.html">google/Common</a></li>
                                <li><a href="../classes/google/CommonND.html">google/CommonND</a></li>
                                <li><a href="../classes/jsPDF.html">jsPDF</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/google_Area.html">google/Area</a></li>
                                <li><a href="../modules/google_Bar.html">google/Bar</a></li>
                                <li><a href="../modules/google_Common.html">google/Common</a></li>
                                <li><a href="../modules/google_CommonND.html">google/CommonND</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: bower_components\amcharts\dist\amcharts\exporting\jspdf.plugin.addimage.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/** @preserve 
jsPDF addImage plugin (JPEG only at this time)
Copyright (c) 2012 https://github.com/siefkenj/
*/

/**
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * &quot;Software&quot;), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */

;(function(jsPDFAPI) {
&#x27;use strict&#x27;

var namespace = &#x27;addImage_&#x27;

// takes a string imgData containing the raw bytes of
// a jpeg image and returns [width, height]
// Algorithm from: http://www.64lines.com/jpeg-width-height
var getJpegSize = function(imgData) {
	&#x27;use strict&#x27;
	var width, height;
	// Verify we have a valid jpeg header 0xff,0xd8,0xff,0xe0,?,?,&#x27;J&#x27;,&#x27;F&#x27;,&#x27;I&#x27;,&#x27;F&#x27;,0x00
	if (!imgData.charCodeAt(0) === 0xff ||
		!imgData.charCodeAt(1) === 0xd8 ||
		!imgData.charCodeAt(2) === 0xff ||
		!imgData.charCodeAt(3) === 0xe0 ||
		!imgData.charCodeAt(6) === &#x27;J&#x27;.charCodeAt(0) ||
		!imgData.charCodeAt(7) === &#x27;F&#x27;.charCodeAt(0) ||
		!imgData.charCodeAt(8) === &#x27;I&#x27;.charCodeAt(0) ||
		!imgData.charCodeAt(9) === &#x27;F&#x27;.charCodeAt(0) ||
		!imgData.charCodeAt(10) === 0x00) {
			throw new Error(&#x27;getJpegSize requires a binary jpeg file&#x27;)
	}
	var blockLength = imgData.charCodeAt(4)*256 + imgData.charCodeAt(5);
	var i = 4, len = imgData.length;
	while ( i &lt; len ) {
		i += blockLength;
		if (imgData.charCodeAt(i) !== 0xff) {
			throw new Error(&#x27;getJpegSize could not find the size of the image&#x27;);
		}
		if (imgData.charCodeAt(i+1) === 0xc0 || //(SOF) Huffman  - Baseline DCT
		    imgData.charCodeAt(i+1) === 0xc1 || //(SOF) Huffman  - Extended sequential DCT 
		    imgData.charCodeAt(i+1) === 0xc2 || // Progressive DCT (SOF2)
		    imgData.charCodeAt(i+1) === 0xc3 || // Spatial (sequential) lossless (SOF3)
		    imgData.charCodeAt(i+1) === 0xc4 || // Differential sequential DCT (SOF5)
		    imgData.charCodeAt(i+1) === 0xc5 || // Differential progressive DCT (SOF6)
		    imgData.charCodeAt(i+1) === 0xc6 || // Differential spatial (SOF7)
		    imgData.charCodeAt(i+1) === 0xc7) {
			height = imgData.charCodeAt(i+5)*256 + imgData.charCodeAt(i+6);
			width = imgData.charCodeAt(i+7)*256 + imgData.charCodeAt(i+8);
			return [width, height];
		} else {
			i += 2;
			blockLength = imgData.charCodeAt(i)*256 + imgData.charCodeAt(i+1)
		}
	}
}
// Image functionality ported from pdf.js
, putImage = function(img) {
	var objectNumber = this.internal.newObject()
	, out = this.internal.write
	, putStream = this.internal.putStream

	img[&#x27;n&#x27;] = objectNumber

	out(&#x27;&lt;&lt;/Type /XObject&#x27;)
	out(&#x27;/Subtype /Image&#x27;)
	out(&#x27;/Width &#x27; + img[&#x27;w&#x27;])
	out(&#x27;/Height &#x27; + img[&#x27;h&#x27;])
	if (img[&#x27;cs&#x27;] === &#x27;Indexed&#x27;) {
		out(&#x27;/ColorSpace [/Indexed /DeviceRGB &#x27;
				+ (img[&#x27;pal&#x27;].length / 3 - 1) + &#x27; &#x27; + (objectNumber + 1)
				+ &#x27; 0 R]&#x27;);
	} else {
		out(&#x27;/ColorSpace /&#x27; + img[&#x27;cs&#x27;]);
		if (img[&#x27;cs&#x27;] === &#x27;DeviceCMYK&#x27;) {
			out(&#x27;/Decode [1 0 1 0 1 0 1 0]&#x27;);
		}
	}
	out(&#x27;/BitsPerComponent &#x27; + img[&#x27;bpc&#x27;]);
	if (&#x27;f&#x27; in img) {
		out(&#x27;/Filter /&#x27; + img[&#x27;f&#x27;]);
	}
	if (&#x27;dp&#x27; in img) {
		out(&#x27;/DecodeParms &lt;&lt;&#x27; + img[&#x27;dp&#x27;] + &#x27;&gt;&gt;&#x27;);
	}
	if (&#x27;trns&#x27; in img &amp;&amp; img[&#x27;trns&#x27;].constructor == Array) {
		var trns = &#x27;&#x27;;
		for ( var i = 0; i &lt; img[&#x27;trns&#x27;].length; i++) {
			trns += (img[trns][i] + &#x27; &#x27; + img[&#x27;trns&#x27;][i] + &#x27; &#x27;);
			out(&#x27;/Mask [&#x27; + trns + &#x27;]&#x27;);
		}
	}
	if (&#x27;smask&#x27; in img) {
		out(&#x27;/SMask &#x27; + (objectNumber + 1) + &#x27; 0 R&#x27;);
	}
	out(&#x27;/Length &#x27; + img[&#x27;data&#x27;].length + &#x27;&gt;&gt;&#x27;);

	putStream(img[&#x27;data&#x27;]);

	out(&#x27;endobj&#x27;);
}
, putResourcesCallback = function() {
	var images = this.internal.collections[namespace + &#x27;images&#x27;]
	for ( var i in images ) {
		putImage.call(this, images[i])
	}
}
, putXObjectsDictCallback = function(){
	var images = this.internal.collections[namespace + &#x27;images&#x27;]
	, out = this.internal.write
	, image
	for (var i in images) {
		image = images[i]
		out(
			&#x27;/I&#x27; + image[&#x27;i&#x27;]
			, image[&#x27;n&#x27;]
			, &#x27;0&#x27;
			, &#x27;R&#x27;
		)
	}
}

jsPDFAPI.addImage = function(imageData, format, x, y, w, h) {
	&#x27;use strict&#x27;
	if (typeof imageData === &#x27;object&#x27; &amp;&amp; imageData.nodeType === 1) {
        var canvas = document.createElement(&#x27;canvas&#x27;);
        canvas.width = imageData.clientWidth;
	    canvas.height = imageData.clientHeight;

        var ctx = canvas.getContext(&#x27;2d&#x27;);
        if (!ctx) {
            throw (&#x27;addImage requires canvas to be supported by browser.&#x27;);
        }
        ctx.drawImage(imageData, 0, 0, canvas.width, canvas.height);
        imageData = canvas.toDataURL(&#x27;image/jpeg&#x27;);
	    format = &quot;JPEG&quot;;
	}
	if (format.toUpperCase() !== &#x27;JPEG&#x27;) {
		throw new Error(&#x27;addImage currently only supports format \&#x27;JPEG\&#x27;, not \&#x27;&#x27;+format+&#x27;\&#x27;&#x27;);
	}

	var imageIndex
	, images = this.internal.collections[namespace + &#x27;images&#x27;]
	, coord = this.internal.getCoordinateString
	, vcoord = this.internal.getVerticalCoordinateString;

	// Detect if the imageData is raw binary or Data URL
	if (imageData.substring(0, 23) === &#x27;data:image/jpeg;base64,&#x27;) {
		imageData = atob(imageData.replace(&#x27;data:image/jpeg;base64,&#x27;, &#x27;&#x27;));
	}

	if (images){
		// this is NOT the first time this method is ran on this instance of jsPDF object.
		imageIndex = Object.keys ? 
		Object.keys(images).length :
		(function(o){
			var i = 0
			for (var e in o){if(o.hasOwnProperty(e)){ i++ }}
			return i
		})(images)
	} else {
		// this is the first time this method is ran on this instance of jsPDF object.
		imageIndex = 0
		this.internal.collections[namespace + &#x27;images&#x27;] = images = {}
		this.internal.events.subscribe(&#x27;putResources&#x27;, putResourcesCallback)
		this.internal.events.subscribe(&#x27;putXobjectDict&#x27;, putXObjectsDictCallback)
	}

	var dims = getJpegSize(imageData);
	var info = {
		w : dims[0],
		h : dims[1],
		cs : &#x27;DeviceRGB&#x27;,
		bpc : 8,
		f : &#x27;DCTDecode&#x27;,
		i : imageIndex,
		data : imageData
		// n: objectNumber will be added by putImage code

	};
	images[imageIndex] = info
	if (!w &amp;&amp; !h) {
		w = -96;
		h = -96;
	}
	if (w &lt; 0) {
		w = (-1) * info[&#x27;w&#x27;] * 72 / w / this.internal.scaleFactor;
	}
	if (h &lt; 0) {
		h = (-1) * info[&#x27;h&#x27;] * 72 / h / this.internal.scaleFactor;
	}
	if (w === 0) {
		w = h * info[&#x27;w&#x27;] / info[&#x27;h&#x27;];
	}
	if (h === 0) {
		h = w * info[&#x27;h&#x27;] / info[&#x27;w&#x27;];
	}

	this.internal.write(
		&#x27;q&#x27;
		, coord(w)
		, &#x27;0 0&#x27;
		, coord(h) // TODO: check if this should be shifted by vcoord
		, coord(x)
		, vcoord(y + h)
		, &#x27;cm /I&#x27;+info[&#x27;i&#x27;]
		, &#x27;Do Q&#x27;
	)

	return this 
}
})(jsPDF.API)
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>

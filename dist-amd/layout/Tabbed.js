(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","../layout/Surface","../chart/Pie","../chart/MultiChart","../google/Line","../common/Text","css!./Tabbed"],t):e.form_Form=t(e.d3,e.common_HTMLWidget,e.layout_Surface,e.chart_Pie,e.chart_MultiChart,e.chart_Line,e.common_Text)})(this,function(e,t,n,r,i,s,o){function u(){t.call(this),this._tag="div"}return u.prototype=Object.create(t.prototype),u.prototype.constructor=u,u.prototype._class+=" layout_Tabbed",u.prototype.publish("padding",4,"number","Padding"),u.prototype.publish("activeTabIdx",0,"number","Index of active tab",null,{}),u.prototype.publish("labels",[],"array","Array of tab labels sharing an index with 'widgets'",null,{tags:["Private"]}),u.prototype.publish("widgets",[],"widgetArray","widgets",null,{tags:["Private"]}),u.prototype.testData=function(){return this.addTab((new i).testData(),"MultiChart",!0).addTab((new r).testData(),"Pie Chart").addTab((new s).testData(),"Line Chart").addTab((new u).labels([]).widgets([]).addTab((new r).testData(),"Another Pie Chart").addTab((new s).testData(),"Another Line Chart",!0),"Nested Example"),this},u.prototype.addTab=function(e,t,r){var i=this.labels(),s=this.widgets();return r&&this.activeTabIdx(this.widgets().length),i.push(t),s.push((new n).widget(e?e:(new o).text("No widget defined for tab"))),this.labels(i),this.widgets(s),this},u.prototype.widgetSize=function(e){var t=this.clientWidth(),n=this.clientHeight(),r=this._tabContainer.node().getBoundingClientRect();return typeof r.height!="undefined"&&(n-=r.height),{width:t,height:n}},u.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments),this._tabContainer=n.append("div"),this._contentContainer=n.append("div")},u.prototype.update=function(n,r){t.prototype.update.apply(this,arguments);var i=this;r.style("padding",this.padding()+"px");var s=this._tabContainer.selectAll(".tab-button.id"+this.id()).data(this.labels(),function(e){return e});s.enter().append("span").attr("class","tab-button id"+this.id()).style("cursor","pointer").on("click",function(e,t){i.activeTabIdx(t).render()}),s.classed("active",function(e,t){return i.activeTabIdx()===t}).text(function(e){return e}),s.exit().remove();var o=this._contentContainer.selectAll(".tab-content.id"+this.id()).data(this.widgets(),function(e){return e.id()});o.enter().append("div").attr("class","tab-content id"+this.id()).each(function(e,t){e.target(this)}),o.classed("active",function(e,t){return i.activeTabIdx()===t}).style("display",function(e,t){return i.activeTabIdx()===t?"block":"none"}).each(function(t,n){var r=i.widgetSize(e.select(this));t.resize(r).render()}),o.exit().each(function(e,t){e.target(null)}).remove()},u});
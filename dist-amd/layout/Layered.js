(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","../layout/AbsoluteSurface","../chart/Pie","../map/ChoroplethStates","../chart/Column","../common/Text","css!./Layered"],t):e.form_Form=t(e.d3,e.common_HTMLWidget,e.layout_AbsoluteSurface,e.chart_Pie,e.map_ChoroplethStates,e.chart_Line,e.common_Text)})(this,function(e,t,n,r,i,s,o){function u(){t.call(this),this._tag="div"}return u.prototype=Object.create(t.prototype),u.prototype.constructor=u,u.prototype._class+=" layout_Layered",u.prototype.publish("padding",0,"number","Padding"),u.prototype.publish("widgets",[],"widgetArray","widgets",null,{tags:["Private"]}),u.prototype.testData=function(){this.addLayer((new n).x(0).y(0).width(100).height(100).widget((new s).testData())).addLayer((new n).x(40).y(40).width(50).height(50).opacity(.66).widget((new r).testData())).addLayer((new n).x(10).y(0).width(40).height(50).widget((new i).testData()));var e=this;return setInterval(function(){e.widgets().sort(function(e,t){return Math.random()<.5?-1:1}),e.render()},3e3),this},u.prototype.addLayer=function(e){var t=this.widgets();return t.push(e?e:(new o).text("No widget defined for layer.")),this.widgets(t),this},u.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments),this._contentContainer=n.append("div").attr("class","container")},u.prototype.update=function(e,n){t.prototype.update.apply(this,arguments);var r=this;n.style("padding",this.padding()+"px");var i=this._contentContainer.selectAll(".content.id"+this.id()).data(this.widgets(),function(e){return e.id()});i.enter().append("div").attr("class","content id"+this.id()).each(function(e,t){e.target(this)}),i.each(function(e,t){e.resize({width:r.clientWidth(),height:r.clientHeight()}).render()}),i.exit().each(function(e,t){e.target(null)}).remove(),i.order()},u});
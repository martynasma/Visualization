(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","../chart/MultiChart","css!./AbsoluteSurface","css!font-awesome"],t):e.layout_AbsoluteSurface=t(e.d3,e.common_HTMLWidget,e.chart_MultiChart)})(this,function(e,t,n){function r(){t.call(this),this._tag="div"}return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype._class+=" layout_AbsoluteSurface",r.prototype.publish("units","percent","set","Units",["pixels","percent"]),r.prototype.publish("x",0,"number","Widget XPos"),r.prototype.publish("y",0,"number","Widget YPos"),r.prototype.publish("width","100","string","Widget Width, omit for full"),r.prototype.publish("height","100","string","Widget Height, omit for full"),r.prototype.publish("opacity",1,"number","Opacity"),r.prototype.publish("widget",null,"widget","Widget",null,{tags:["Private"]}),r.prototype.testData=function(){return this.x(25).y(25).width(50).height(50).widget((new n).testData().chartType("COLUMN")),this},r.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments)},r.prototype.update=function(e,n){t.prototype.update.apply(this,arguments);var r=0,i=0,s=this.clientWidth(),o=this.clientHeight();switch(this.units()){case"pixels":r=this.x(),i=this.y(),s=this.width()===""?s-r:Number(this.width()),o=this.height()===""?o-i:Number(this.height());break;case"percent":r=this.x()*s/100,i=this.y()*o/100,s=this.width()===""?s-r:Number(this.width()*s/100),o=this.height()===""?o-i:Number(this.height()*o/100)}this.pos({x:r,y:i}),n.style("opacity",this.opacity());var u=n.selectAll("#"+this._id+" > .AbsoluteSurfaceWidget").data(this.widget()?[this.widget()]:[],function(e){return e._id});u.enter().append("div").attr("class","AbsoluteSurfaceWidget").each(function(e){e.target(this)}),u.each(function(e){e.resize({width:s,height:o})}),u.exit().each(function(e){e.target(null)}).remove()},r.prototype.exit=function(e,n){this.widget()&&(this.widget(null),this.render()),t.prototype.exit.apply(this,arguments)},r.prototype.render=function(e){var n=this;return t.prototype.render.call(this,function(t){n.widget()?n.widget().render(function(t){e&&e(t)}):e&&e(t)})},r});